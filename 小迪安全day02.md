# 小迪安全day02

## HTTP/S 数据包

### 模型区别

HTTP有三层

- HTTP
- TCP
- IP

HTTPS有四层

- HTTP
- SSL or TLS
- TCP
- IP

### HTTP 简要通信过程 

建立连接（tcp）——>发送请求数据包（套接字）——>返回响应数据包——>关闭连接 

- 浏览器**建立**与 web 服务器之间的**连接** 
- 浏览器将**请求数据打包**（生成请求数据包）并发送到 web **服务器** 
- web 服务器将**处理结果打包**（生成响应数据包）并发送给**浏览器** 
- web 服务器**关闭连接**

### Request请求数据包

检查元素——审查模块——**Network**

#### 格式

- 请求行：请求类型/请求资源路径、协议的版本和类型 
- 请求头：一些键值对，浏览器与 web 服务器之间都可以发送，特定的某种含义 
- 空行：请求头与请求体之间用一个空行隔开； 
- 请求体：要发送的数据(一般 post 提交会使用)；

#### 请求行

请求行由三个标记组成：请求方法、请求 URL 和 HTTP 版本，它们用空格分享。 

例如：GET /index.html HTTP/1.1 

HTTP 规划定义了 8 种可能的请求方法： 

- GET：检索 URL 中标识资源的一个简单请求 
- HEAD：与 GET 方法相同，服务器只返回状态行和头标，并不返回请求文档 
- POST：服务器接受被写入客户端输出流中的数据的请求 
- PUT：服务器保存请求数据作为指定 URL 新内容的请求 
- DELETE：服务器删除 URL 中命令的资源的请求 
- OPTIONS：关于服务器支持的请求方法信息的请求 
- TRACE：web 服务器反馈 Http 请求和其头标的请求 
- CONNECT ：已文档化，但当前未实现的一个方法，预留做隧道处理

#### 请求头

由关键字/值对组成，每行一对，关键字和值用冒号分享。请求头标通知服务器腾于客户端的功能和标识。 

- HOST: 主机或域名地址 
- Accept：指浏览器或其他客户可以接爱的 MIME 文件格式。Servlet 可以根据它判断并返回适当的文件格 式。 
- User-Agent：是客户浏览器名称 
- Host：对应网址 URL 中的 Web 名称和端口号。 
- Accept-Langeuage：指出浏览器可以接受的语言种类，如 en 或 en-us，指英语。 
- connection：用来告诉服务器是否可以维持固定的 HTTP 连接。http 是无连接的，HTTP/1.1 使用 Keep-Alive 为默认值，这样，当浏览器需要多个文件时(比如一个 HTML 文件和相关的图形文件)，不需要每次都建立 连接 
- Cookie：浏览器用这个属性向服务器发送 Cookie。Cookie 是在浏览器中寄存的小型数据体，它可以记载 和服务器相关的用户信息，也可以用来实现会话功能。 
- Referer ： 表 明 产 生 请 求 的 网 页 URL 。 如 比 从 网 页 /icconcept/index.jsp 中 点 击 一 个 链 接 到 网 页 /icwork/search ， 在 向 服 务 器 发 送 的 GET/icwork/search 中 的 请 求 中 ， Referer 是 http://hostname:8080/icconcept/index.jsp。这个属性可以用来跟踪 Web 请求是从什么网站来的。 Content-Type：用来表名 request 的内容类型。可以用 HttpServletRequest 的 getContentType()方法取得。 
- Accept-Charset：指出浏览器可以接受的字符编码。英文浏览器的默认值是 ISO-8859-1
- Accept-Encoding：指出浏览器可以接受的编码方式。编码方式不同于文件格式，它是为了压缩文件并加 速文件传递速度。浏览器在接收到 Web 响应之后先解码，然后再检查文件格式。 

#### 空行 

最后一个请求头标之后是空行，发送回车符和退行，通知服务器以下不再有头标。

#### 请求数据 

使用 POST 传送，最常使用的是 Content-Type 和 Content-Length 头标。



### Response 返回数据包

#### 格式 

一个响应由四个部分组成；状态行、响应头标、空行、响应数据。 

- 状态行：协议版本、数字形式的状态代码和状态描述，个元素之间以空格分隔 
- 响应头标：包含服务器类型、日期、长度、内容类型等 
- 空行：响应头与响应体之间用空行隔开 
- 响应数据：浏览器会将实体内容中的数据取出来，生成相应的页面 

#### HTTP 响应码

- 1xx：信息，请求收到，继续处理 
- 2xx：成功，行为被成功地接受、理解和采纳 
- 3xx：重定向，为了完成请求，必须进一步执行的动作 
- 4xx：客户端错误 
- 5xx：服务器错误