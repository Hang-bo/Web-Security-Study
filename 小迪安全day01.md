# 小迪安全——day01

## 基础入门-概念名词



### 域名

#### what

由于ip地址不方便记忆，设计出了域名，并通过**网域名称系统**（**DNS**）来将域名和IP地址相互映射，使人更方便地访问互联网，而不用去记住能够被机器**直接读取**的**IP地址数串**。

#### 注册与查询

万网（阿里云）

#### 二级域名、多级域名

www对应着万维网服务

- 国际顶级域名.com

  此类顶级域名下的二级域名一般是指域名注册人选择使用的网上名称，通常使用自己的商标、商号或其他商业标志作为自己的网上名称

- 国家顶级域名，例如：.cn

  此类顶级域名下的二级域名一般是指类似于国际顶级域名的表示注册人类别和功能的标志

**域名对安全测试的意义：**

- 相同的二级域名的网站架构、源码、密码可能相似
- 两个网站的域名解析的ip地址可能相同



### DNS

#### what

域名系统（英文：Domain Name System，缩写：DNS）是互联网的一项服务。它作为将域名和IP地址相互映射的一个**分布式数据库**，能够使人更方便地访问互联网。DNS使用UDP端口53。

TTL：ICMP数据包的转发次数

DNS TTL：指域名解析信息在DNS中的存在时间

#### 本地host文件和dns

Host文件路径（dns的本地缓存）：C:\Windows\System32\drivers\etc\hosts

作用机制：查找域名解析时，先看本地host文件是否有缓存，没有在查找域名服务器。 

可以修改DNS解析进而实施钓鱼攻击

#### CDN和DNS

CDN（Content Delivery Network），即**内容分发网络**。通过中心平台的负载均衡、内容分发、调度等功能模块，使用户**就近获取**所需内容，**降低网络拥塞**，提高用户访问响应速度和命中率。-----大型网络在不同地区有不同的服务器（节点技术）。 

可以理解为一个缓存，跳转口，网站 核心不在这

（**对安全测试有干扰**）

刷新本地的DNS解析缓存：ipconfig/flushdns

刷新后ping得到的CDN显示的地址改变

#### 常见的dns攻击

dns劫持---攻击服务器（地区）

受到攻击后，用户访问网站会有恶意解析，ip地址解析结果会不正常，跳转到钓鱼网站 





### 脚本语言

#### 常见类型

- asp
- php：小型网站开发
- aspx
- jsp
- javaweb：大型网站开发
- pl
- python——django
- cgi 

等等......

#### 不同脚本类型与安全漏洞的关系

- 不同脚本可能爆发漏洞的可能性有所不同
- 不同脚本漏洞的存在点可能不同，因为不同语言的适用范围不同

#### 

### 后门 

#### what

- 下次更容易进入
- 管道，提供攻击的路径

免杀：不被检测到



### WEB

#### Web组成架构模型

- 网站源码：分**脚本**类型，分**应用方向**覆盖

- 操作系统：windows，linux

  **攻击方式**不一样，不同操作系统漏洞不同

- 中间件（搭建平台）：apache,lis,tomcat,nginx

  **提供服务**

- 数据库：mysql,access,mssql,oracle,Sybase,db2,postsql等等

  **获取数据库权限**

#### Web相关的漏洞

- web源码漏洞

  SQL注入，上传，XSS，代码执行，变量覆盖，逻辑漏洞，反序列化

- web中间件漏洞

- web数据库漏洞

- web操作系统层对应漏洞

  提权

- 其它第三方对应漏洞---qq,WPS

- App或者pc应用结合漏洞 

  - 逆向
  - web移动端转到电脑pc端分析



### 演示案例

#### 多级域名的枚举查找（原理，方式）

- 直接查找youku.com 

- 批量爆破工具Layer.exe

- 运营商第三方接口

  阿里云域名注册查询

  - 域名查询**a记录**：在提示符下直接输入域名，可查到该域名的A记录，其中“Non-authoritative answer”表示查询结果是从DNS的cache里返回的；

  - 输入set type=mx，再输入域名，可查询**MX记录**；

  - 输入set type=cname，再输入域名，可查询**CNAME记录**；

  - 输入set type=ns，再输入域名，可查询**NS记录**。 

#### DNS 解析修改后分析（本地或服务） 

各种记录分析

#### EXE 后门功能及危害及类似 WEB 后门 

安装后门软件在虚拟机服务，并进行监听

#### APP 类结合 WEB 协议，PC 类结合 WEB 协议

Burpsite专门抓web协议数据包

- 配置IP地址——本机ip
- proxy下的http history可以获取历史访问网站
- 可以抓包、反向发送回去